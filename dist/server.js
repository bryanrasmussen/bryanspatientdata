!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=6)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("nano")},function(e,t,n){n(7),e.exports=n(9)},function(e,t){e.exports=require("babel-polyfill")},function(e,t){e.exports=require("babel-register")},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),o=n(0),i=n.n(o),l=n(3),c=n(1),s=n.n(c);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,d(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){var e=s.a.parse(window.location.href,!0).query,t=e.page?Number(e.page):0,n=function(t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){m(e,t,n[t])})}return e}({},e);return n.page=t,Object.keys(n).map(function(e){return e+"="+n[e]}).join("&")},r=function(e,t){return e<0?null:i.a.createElement("li",{className:"paginationLink"},i.a.createElement("a",{itemProp:"url",href:"/?"+n(e)},i.a.createElement("span",{itemProp:"name"},t)))};return i.a.createElement(i.a.Fragment,null,i.a.createElement("nav",{role:"navigation","aria-label":"Pagination Navigation"},i.a.createElement("p",null,"Navigate through results"),i.a.createElement("ul",{className:"pagination",role:"navigation",itemScope:!0,itemType:"http://schema.org/SiteNavigationElement"},r(t-1,"< Previous"),i.a.createElement("li",null,"  ",i.a.createElement("strong",null,"●")," "),r(t+1,"Next >"))))}}])&&p(n.prototype,r),a&&p(n,a),t}();function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=b(t).call(this,e))||"object"!==g(a)&&"function"!=typeof a?_(r):a).state={showSearchForm:!0},n.onToggleSearchForm=n.onToggleSearchForm.bind(_(n)),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,i.a.Component),n=t,(r=[{key:"onToggleSearchForm",value:function(){setState({showSearchForm:!this.state.showSearchForm})}},{key:"render",value:function(){var e=this.state.showSearchForm?"Hide Search":"Show Search";return i.a.createElement("div",{className:"searchForm",role:"search"},i.a.createElement("form",{method:"GET",action:"/"},!this.props.serverSide&&i.a.createElement("p",{class:"SearchToggler","aria-hidden":"true"},i.a.createElement("button",{type:"button",onClick:this.onToggleSearchForm},e)),i.a.createElement("fieldset",null,i.a.createElement("legend",null,"Search In Patient Data"),this.state.showSearchForm&&i.a.createElement("div",{className:"formWrapper"},i.a.createElement("h3",null,"Total Discharges"),i.a.createElement("div",{className:"doubleField"},i.a.createElement("p",{className:"inputfield"},i.a.createElement("label",{htmlFor:"max_discharges"},"Maximum"),i.a.createElement("input",{type:"text",name:"max_discharges",id:"max_discharges"})),i.a.createElement("p",{className:"inputfield"},i.a.createElement("label",{htmlFor:"min_discharges"},"Minimum"),i.a.createElement("input",{type:"text",name:"min_discharges",id:"min_discharges"}))),i.a.createElement("h3",null,"Average Covered Charges"),i.a.createElement("div",{className:"doubleField"},i.a.createElement("p",{className:"inputfield"},i.a.createElement("label",{htmlFor:"max_average_covered_charges"},"Maximum"),i.a.createElement("input",{type:"text",name:"max_average_covered_charges",id:"max_average_covered_charges"})),i.a.createElement("p",{className:"inputfield"},i.a.createElement("label",{htmlFor:"min_average_covered_charges"},"Minimum"),i.a.createElement("input",{type:"text",name:"min_average_covered_charges",id:"min_average_covered_charges"}))),i.a.createElement("h3",null,"Average Medicare Payment"),i.a.createElement("div",{className:"doubleField"},i.a.createElement("p",{className:"inputfield"},i.a.createElement("label",{htmlFor:"max_average_medicare_payments"},"Maximum "),i.a.createElement("input",{type:"text",name:"max_average_medicare_payments",id:"max_average_medicare_payments"})),i.a.createElement("p",{className:"inputfield"},i.a.createElement("label",{htmlFor:"min_average_medicare_payments"},"Minimum"),i.a.createElement("input",{type:"text",name:"min_average_medicare_payments",id:"min_average_medicare_payments"}))),i.a.createElement("p",null,i.a.createElement("label",{htmlFor:"state"},"State"),i.a.createElement("input",{type:"text",name:"state",id:"state"})),i.a.createElement("input",{className:"submit",type:"submit",value:"Search"})))))}}])&&v(n.prototype,r),a&&v(n,a),t}();function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=O(t).call(this,e))||"object"!==S(a)&&"function"!=typeof a?x(r):a).onSubmit=n.onSubmit.bind(x(n)),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,i.a.Component),n=t,(r=[{key:"onSubmit",value:function(e){e.preventDefault();var t=e.target.elements.city.value;this.props.onSubmit(t)}},{key:"render",value:function(){var e=this.props.providerData.map(function(e,t){return i.a.createElement("li",{key:t,className:"searchResult"},i.a.createElement("section",null,i.a.createElement("p",{className:"ProviderId"},"Provider ",e["Provider Id"]," : ",e["Provider Name"]),i.a.createElement("div",{className:"ProviderLocation"},i.a.createElement("h3",null,"Located at"),i.a.createElement("p",null,e["Provider Street Address"],", ",e["Provider City"]," - ",e["Provider Zip Code"],", ",e["Provider State"]),i.a.createElement("p",null," Referral Region: ",e["Hospital Referral Region Description"])),i.a.createElement("p",{className:"discharges"},"Total Discharges: ",e["Total Discharges"]),i.a.createElement("p",{className:"covered"},"Average Covered Charges: ",e["Average Covered Charges"]),i.a.createElement("p",{className:"medicate"},"Average Medicare Payments: ",e["Average Medicare Payments"]),i.a.createElement("p",{className:"totalpayments"},"Average Total Payments: ",e["Average Total Payments"])))}),t=i.a.createElement(y,null);return i.a.createElement(i.a.Fragment,null,i.a.createElement("header",null,i.a.createElement("h1",null,"Patient Data")),i.a.createElement(w,{serverside:this.props.serverside}),i.a.createElement("main",null,e.length>0&&i.a.createElement(i.a.Fragment,null,t,i.a.createElement("ol",null,e),t),0===e.length&&i.a.createElement("p",null,"There were no results returned from the search")))}}])&&P(n.prototype,r),a&&P(n,a),t}(),N=function(e,t){return i.a.createElement(k,{serverSide:e,providerData:t})},T=function(e){var t=e.title;return'\n    <head>\n      <meta charset="utf-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1">\n      <link rel="icon" href="/favicon.ico" />\n      <link rel=\'stylesheet\' href=\'https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.css\'>\n      <style type\n      ="text/css">\n        header {\n            margin-left: -10px;\n        }\n        .searchForm {\n            width: 40%;\n            background-color: beige;\n            color: darkblue;\n            position: fixed;\n            right: 10px;\n            height: 300px;\n            overflow: auto;\n        }\n        .searchForm h3 {\n            color: darkblue;\n            margin-bottom: .5rem;\n        }\n        .searchForm input {\n            border: 1px solid darkblue;\n            background-color: white;\n            color: darkblue;\n            max-width: 75px;\n            width: 50&;\n        }\n        \n        .submit {\n            background-color: darkblue;\n            min-width: 100px;\n        }\n\n        .searchResult {\n            padding-left: 1rem;\n            width: 57%;\n            min-width: 250px\n        }\n\n        .searchResult::before {\n            font-weight: bold;\n            font-size: 1.5rem;\n            margin-right: 0.5rem;\n            line-height: 1;\n        }\n        \n        .doubleField {\n            display: flex;\n        }\n        .pagination {\n            display: flex;\n            list-style: none\n        }\n        .paginationLink {\n            margin-left: 1rem;\n            margin-right: 1rem;\n        }\n        .SearchToggler {display: none}\n        @media only screen and (max-width: 750px) {\n            .searchForm {\n                position: relative;\n                width: 100%;\n                right: inherit;\n                height: auto;\n            }\n            .SearchToggler {display: block}\n        }\n      </style>\n      <title>'.concat(t,"</title>\n    </head>\n")},F=function(e){var t=e.title;return'\n  <!DOCTYPE html>\n  <html lang="en">\n    '.concat(T(t),'\n    <body>\n      <noscript><iframe id="app" width="100%"\n      height="100%" src="/serverside"/></noscript>\n      <div id="clientSideApp">\n      </div>\n      <script src="/script/client.js"><\/script>\n    </body>\n  </html>\n')},q=function(e){var t=e.title,n=e.message;return'\n  <!DOCTYPE html>\n  <html lang="en">\n    <head>\n      <meta charset="utf-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1">\n      <link rel="icon" href="/favicon.ico" />\n      <link rel=\'stylesheet\' href=\'https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.css\'>\n      <title>'.concat(t,"</title>\n    </head>\n    <body>\n      ").concat(JSON.stringify(n,null," "),"\n    </body>\n  </html>\n")},C=function(e){var t=e.body,n=e.title;return'\n  <!DOCTYPE html>\n  <html lang="en">\n    '.concat(T(n),'\n    <body>\n      <div id="app">').concat(t,"</div>\n    </body>\n  </html>\n")},D=n(4),A=n.n(D),M=n(5);n(8)({presets:["es2015","react"]});var R=a()(),$=function(e,t){for(var n=M("http://localhost:5984").use("patient_data"),r={max_discharges:{field:"Total Discharges",query:{$lte:null}},min_discharges:{field:"Total Discharges",query:{$gte:null}},max_average_covered_charges:{field:"coveredCharges",query:{$lte:null}},min_average_covered_charges:{field:"coveredCharges",query:{$gte:null}},max_average_medicare_payments:{field:"medicare",query:{$lte:null}},min_average_medicare_payments:{field:"medicare",query:{$gte:null}},state:{field:"Provider State",query:{$eq:null}}},a={selector:{},fields:["DRG Definition","Provider Id","Provider Name","Provider Street Address","Provider City","Provider State","Provider Zip Code","Hospital Referral Region Description","Total Discharges","Average Covered Charges","Average Total Payments","Average Medicare Payments"],limit:51},o={},i=0,l=Object.keys(e.query);i<l.length;i++){var c=l[i],s=e.query[c],u=r[c];if(u&&s){for(var m=Object.entries(u.query),p=o[u.field]||{},f=0,d=m;f<d.length;f++){var h=d[f][0];p[h]="$eq"===h?s:Number(s)}o[u.field]=p}}a.selector=o,e.query.page&&(a.skip=50*Number(e.query.page)),n.find(a).then(function(e){t(e.docs,a)})};R.get("/script/*",function(e,t){var n=e.url.substring("/script/".length);-1===["server.js"].indexOf(n)&&(t.type(".js"),A.a.readFile("./dist/"+n,{encoding:"utf-8"},function(e,n){e?t.send('throw "Could not load requested script";'):t.send(n)}))}),R.get("/providers",function(e,t){$(e,function(e){t.type("json"),t.send(e)})}),R.get("/analyzeQuery",function(e,t){$(e,function(e,n){var r={query:n,result:e};t.send(q({title:"Patient Data Overview",message:r}))})}),R.get("/",function(e,t){t.send(F({title:"Patient Data Overview"}))}),R.get("/serverside",function(e,t){$(e,function(e){var n=Object(l.renderToString)(i.a.createElement(N,{serverSide:!0,providerData:e.docs}));t.send(C({body:n,title:"Patient Data Overview"}))})}),R.listen(80),console.log("Serving at http://localhost:".concat(80))}]);